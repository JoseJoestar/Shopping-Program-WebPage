<!DOCTYPE html>
<html>

<head>
    <title>jQuery Test</title>
    <meta charset="UTF-8" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <link href="styles.css" rel="stylesheet" type="text/css" />


    <!--<link href="Cropper.css" rel="stylesheet">-->

</head>

<body>

    <!--TODO: Attributes for input type=file -->
    <input type="file" id="file-browser" name="fileUpload[]" multiple />

    <!-- 
    <img id="image" style="width: 50px; height: auto;" src="https://scaleflex.airstore.io/demo/stephen-walker-unsplash.jpg" />
-->
    <div id="Images"></div>

    <script src="https://cdn.scaleflex.it/plugins/filerobot-image-editor/3/filerobot-image-editor.min.js"></script>
    <script src="https://cdn.scaleflex.it/plugins/filerobot-uploader/2.5.1/filerobot-uploader.min.js"></script>


    <script>

        // image editor-->

        const ImageEditor = new FilerobotImageEditor();

        document.getElementById("file-browser")
            .addEventListener("change", function (event) {
                console.log(event)
                // 1. Go throught event object and see how many files are there
                console.log(event.target.files.length);
                var line = document.getElementById("file-browser");
                var displayImage = document.createElement("img");
                var images = document.getElementById("Images");
                // 2. Iterate (if any) through each of the files
                for (var i = 0; i < event.target.files.length; i++) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        var image = document.createElement("img");
                        // the result image data
                        image.setAttribute("class", "Image");

                        image.src = e.target.result;
                        image.addEventListener("click", function (event) {
                            ImageEditor.open(event.target.src);
                            //console.log(event);
                        });
                        images.appendChild(image);
                    }
                    var selectedFile = event.target.files[i];
                    console.log(selectedFile.name);


                    // 3. Display all photos in the browser 
                    reader.readAsDataURL(selectedFile);

                }
            });
/*
                                                                */
        //ImageEditor.open('https://scaleflex.airstore.io/demo/stephen-walker-unsplash.jpg');
    </script>

    <script>
        /* file uploader*/$(document).ready(function () {

            let config = {
                modules: ["UPLOAD", "IMAGE_EDITOR"]
            };
            let onUpload = (files) => {
                console.log('files: ', files);
                alert('Files uploaded successfully! check the console to see the uploaded files');
            };
            let uploader = FilerobotUploader.init(config, onUpload);

            uploader.open();



        });
    </script>





</body>

</html>